<div class="p-4">
  <div *ngIf="!isAuthenticated; else authenticatedView">
    <div class="card shadow-lg">
      <div class="card-body text-center py-12">
        <i class="pi pi-lock text-6xl text-blue-500 mb-4"></i>
        <h2 class="text-2xl font-bold mb-2">Task Form</h2>
        <p class="text-gray-600 mb-6">Please log in to create or edit tasks.</p>
        <div class="flex justify-center gap-4">
          <p-button label="Login" icon="pi pi-sign-in" (click)="navigateToLogin()" />
          <p-button label="Register" icon="pi pi-user-plus" (click)="navigateToRegister()" severity="secondary" />
        </div>
      </div>
    </div>
  </div>
  
  <ng-template #authenticatedView>
    <div class="card shadow-lg max-w-2xl mx-auto">
      <div class="card-body">
        <h1 class="text-2xl font-bold mb-6">{{ isEditMode ? 'Edit Task' : 'Create Task' }}</h1>
        
        <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
          <div class="mb-4">
            <label for="title" class="block text-gray-700 font-medium mb-2">Title *</label>
            <input 
              pInputText
              type="text" 
              id="title" 
              formControlName="title" 
              class="w-full"
              [class.ng-invalid]="taskForm.get('title')?.invalid && taskForm.get('title')?.touched">
            <small class="text-red-500" *ngIf="taskForm.get('title')?.invalid && taskForm.get('title')?.touched">
              Title is required
            </small>
          </div>
          
          <div class="mb-4">
            <label for="description" class="block text-gray-700 font-medium mb-2">Description</label>
            <textarea 
              pTextarea
              id="description" 
              formControlName="description" 
              class="w-full"
              rows="4"></textarea>
          </div>
          
          <div class="mb-6">
            <label for="status" class="block text-gray-700 font-medium mb-2">Status</label>
            <p-select 
              [options]="statusOptions" 
              formControlName="status" 
              optionLabel="label" 
              optionValue="value"
              class="w-full">
            </p-select>
          </div>
          
          <div class="flex justify-end gap-3">
            <p-button 
              type="button" 
              label="Cancel" 
              icon="pi pi-times"
              (click)="cancel()"
              severity="secondary">
            </p-button>
            <p-button 
              type="submit" 
              [label]="isEditMode ? 'Update' : 'Create'"
              icon="pi pi-save"
              [disabled]="taskForm.invalid">
            </p-button>
          </div>
        </form>
      </div>
    </div>
  </ng-template>
</div>
